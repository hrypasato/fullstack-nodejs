CONST FS = REQUIRE('FS')
CONST { TRANSFORM } = REQUIRE('STREAM')

FUNCTION SHOUT() {
    RETURN NEW TRANSFORM({
        TRANSFORM(CHUNK, ENCODING, CALLBACK){
            CALLBACK(NULL, CHUNK.TOSTRING().TOUPPERCASE())
        }
    })
}

FS.CREATEREADSTREAM('23-STREAMS-SHOUT.JS')
    .PIPE(SHOUT())
    .PIPE(FS.CREATEWRITESTREAM('LOUD-CODE.TXT'))

